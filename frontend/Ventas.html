<!-- Vista de Gestión de Ventas -->
<div class="main-content container bg-white rounded-3 p-4">
    <!-- Título principal -->
    <h1 class="page-title mb-4">
        <i class="bi bi-cart-check me-2"></i>Gestión de Ventas
    </h1>
    <!-- Filtros de búsqueda por fecha -->
    <div class="d-flex flex-column flex-md-row gap-3 mb-4 align-items-end">
        <div class="d-flex align-items-center gap-2">
            <label class="form-label mb-0">Buscar Desde</label>
            <input type="date" id="filtroFechaInicio" class="form-control">
        </div>
        <div class="d-flex align-items-center gap-2">
            <label class="form-label mb-0">Hasta</label>
            <input type="date" id="filtroFechaFin" class="form-control">
        </div>
        <button id="aplicarFiltrosVentas" class="btn btn-cafe"><i class="bi bi-search"></i></button>
    </div>
    <!-- Tabla de ventas -->
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th><i class="bi bi-hash me-2"></i>ID</th>
                    <th><i class="bi bi-calendar me-2"></i>Fecha</th>
                    <th><i class="bi bi-currency-dollar me-2"></i>Total</th>
                    <th><i class="bi bi-credit-card me-2"></i>Método de Pago</th>
                    <th><i class="bi bi-person me-2"></i>Usuario</th>
                    <th><i class="bi bi-eye me-2"></i>Ver detalles</th>
                </tr>
            </thead>
            <tbody id="salesTableBody">
                <!-- Las filas de ventas se llenarán dinámicamente por JS -->
            </tbody>
        </table>
    </div>
    <nav aria-label="Paginación de ventas">
        <ul class="pagination justify-content-center mt-3" id="paginationVentas"></ul>
    </nav>
</div>

<!-- Modal: Detalles de Venta -->
<div class="modal fade" id="detalleVentaModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header border-0">
                <h5 class="modal-title fw-bold">
                    <i class="bi bi-eye me-2"></i>Detalles de Venta
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="row g-3 mb-3">
                        <div class="col-md-3">
                            <label class="form-label">ID Venta</label>
                            <input type="text" class="form-control" id="saleDetailId" readonly>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Usuario</label>
                            <input type="text" class="form-control" id="saleDetailUser" readonly>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Fecha</label>
                            <input type="text" class="form-control" id="saleDetailDate" readonly>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Método de Pago</label>
                            <input type="text" class="form-control" id="saleDetailMethod" readonly>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">Total de Venta</label>
                            <input type="text" class="form-control" id="saleDetailTotal" readonly>
                        </div>
                    </div>
                </form>
                <div class="table-responsive mb-3">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th><i class="bi bi-cup-hot me-2"></i>Producto</th>
                                <th><i class="bi bi-123 me-2"></i>Cantidad</th>
                                <th><i class="bi bi-currency-dollar me-2"></i>Precio</th>
                                <th><i class="bi bi-calculator me-2"></i>Subtotal</th>
                            </tr>
                        </thead>
                        <tbody id="saleDetailProducts">
                            <!-- Productos vendidos se llenarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
                <div class="d-flex gap-3 justify-content-end">
                    <button type="button" class="btn btn-success">
                        <i class="bi bi-file-pdf me-2"></i>Exportar a PDF
                    </button>
                    <button type="button" class="btn btn-cafe">
                        <i class="bi bi-file-earmark-excel me-2"></i>Exportar a Excel
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap 5 Bundle con Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
// Inicialización de eventos para la vista de ventas
// Todo lo visual, la lógica real la implementa el backend

document.addEventListener('DOMContentLoaded', function() {
    // Evento para mostrar el modal de detalles de venta y cargar los datos
    document.getElementById('detalleVentaModal').addEventListener('show.bs.modal', function(event) {
        const button = event.relatedTarget; // Botón que disparó el modal
        const ventaId = button.getAttribute('data-venta-id');
        // Aquí iría la lógica para cargar los datos de la venta y sus productos
        console.log('Cargando detalles de la venta ID:', ventaId);
    });
    // Eventos de exportar (simulación visual)
    document.querySelector('#detalleVentaModal .btn-success').onclick = function() {
        alert('Funcionalidad de exportar a PDF a implementar por el backend');
    };
    document.querySelector('#detalleVentaModal .btn-cafe').onclick = function() {
        alert('Funcionalidad de exportar a Excel a implementar por el backend');
    };
});
</script> 